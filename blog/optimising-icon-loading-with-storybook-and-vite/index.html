<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.8.6"><meta name="color-scheme" content="light dark"><!-- Canonical URL --><link rel="canonical" href="https://andrewleedham.me/blog/optimising-icon-loading-with-storybook-and-vite/"><!-- Primary Meta Tags --><title>How I optimised icon loading in Storybook and Vite</title><meta name="title" content="How I optimised icon loading in Storybook and Vite"><meta name="description" content="A look into a recent project to reduce load times and optimise icon loading in Storybook using @storybook/builder-vite."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://andrewleedham.me/blog/optimising-icon-loading-with-storybook-and-vite/"><meta property="og:title" content="How I optimised icon loading in Storybook and Vite"><meta property="og:description" content="A look into a recent project to reduce load times and optimise icon loading in Storybook using @storybook/builder-vite."><!-- Twitter --><meta property="twitter:card" content="summary"><meta property="twitter:url" content="https://andrewleedham.me/blog/optimising-icon-loading-with-storybook-and-vite/"><meta property="twitter:title" content="How I optimised icon loading in Storybook and Vite"><meta property="twitter:description" content="A look into a recent project to reduce load times and optimise icon loading in Storybook using @storybook/builder-vite."><link rel="stylesheet" href="/_astro/_slug_.BYr-1Mpc.css">
<style>main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <a id="logoLink" href="{{ '/' | url }}" aria-label="Go to the Andrew Leedham homepage" data-astro-cid-tvrurpns> <svg id="logoAnimated" class="logo--animated" height="48px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 362 108.04" data-astro-cid-tvrurpns> <title>Andrew Leedham</title> <path id="a-andrew" fill="currentColor" d="M61.59 108l-3.7-20H36.64l-3.39 20H15.54L35.1 11.9h23.87L79.46 108ZM38.95 74.83h16.48l-8.47-46Z" data-astro-cid-tvrurpns> <animate id="aStart" attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M61.59 108l-3.7-20H36.64l-3.39 20H15.54L35.1 11.9h23.87L79.46 108ZM38.95 74.83h16.48l-8.47-46Z" data-astro-cid-tvrurpns></animate> <animate id="aEnd" attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M47.09,37.56l-1.35-7.39H38l-1.24,7.39H30.23L37.39,2h8.74l7.5,35.59ZM38.8,25.26h6l-3.1-17Z" data-astro-cid-tvrurpns></animate> </path> <path id="n-andrew" fill="currentColor" d="M53.51 19h.53q1.8 0 1.8 3.74V37.56h-2V23.35a2.07 2.07 0 00-.11-.81.39.39 0 00-.39-.21h-.53q-.54 0-.54 1.25v14h-2V19h2v1.7Q52.51 19 53.51 19Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M53.51 19h.53q1.8 0 1.8 3.74V37.56h-2V23.35a2.07 2.07 0 00-.11-.81.39.39 0 00-.39-.21h-.53q-.54 0-.54 1.25v14h-2V19h2v1.7Q52.51 19 53.51 19Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M66.83,9.86h1.69q5.81,0,5.81,5.58V37.56H67.9V16.35a1.64,1.64,0,0,0-.34-1.21,1.87,1.87,0,0,0-1.24-.31H64.63q-1.75,0-1.75,1.86V37.56H56.51V9.86h6.32V12.4Q63.62,9.86,66.83,9.86Z" data-astro-cid-tvrurpns></animate> </path> <path id="d-andrew" fill="currentColor" d="M53.84 12.4h2V37.56h-2V35.71q-.21 1.85-1.24 1.85h-.54q-1.79 0-1.79-3.74V22.71q0-3.74 1.79-3.74h.54q.95 0 1.21 1.59ZM52.74 34.23h.53q.54 0 .54-1.25V23.58a2.82 2.82 0 00-.12-1 .43.43 0 00-.42-.28H52.74a.39.39 0 00-.39.21 2.07 2.07 0 00-.11.81v9.9a2.07 2.07 0 00.11.81A.39.39 0 0052.74 34.23Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M53.84 12.4h2V37.56h-2V35.71q-.21 1.85-1.24 1.85h-.54q-1.79 0-1.79-3.74V22.71q0-3.74 1.79-3.74h.54q.95 0 1.21 1.59ZM52.74 34.23h.53q.54 0 .54-1.25V23.58a2.82 2.82 0 00-.12-1 .43.43 0 00-.42-.28H52.74a.39.39 0 00-.39.21 2.07 2.07 0 00-.11.81v9.9a2.07 2.07 0 00.11.81A.39.39 0 0052.74 34.23Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M90,0h6.43V37.56H90.13V34.79q-.68,2.76-4,2.76H84.37q-5.75,0-5.75-5.58V15.39q0-5.58,5.75-5.58h1.75q3,0,3.89,2.37ZM86.57,32.59h1.69q1.75,0,1.75-1.86v-14a2.2,2.2,0,0,0-.4-1.49,1.8,1.8,0,0,0-1.35-.42H86.57a1.87,1.87,0,0,0-1.24.31A1.64,1.64,0,0,0,85,16.29V31.07a1.64,1.64,0,0,0,.34,1.21A1.86,1.86,0,0,0,86.57,32.59Z" data-astro-cid-tvrurpns></animate> </path> <path id="r-andrew" fill="currentColor" d="M53.81 18.93h.32v3.7h-.74q-1.1 0-1.1 2.72v12.2h-2V19h2v2.38a4.63 4.63 0 01.54-1.78A1.16 1.16 0 0153.81 18.93Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M53.81 18.93h.32v3.7h-.74q-1.1 0-1.1 2.72v12.2h-2V19h2v2.38a4.63 4.63 0 01.54-1.78A1.16 1.16 0 0153.81 18.93Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M112.52,9.75h1v5.53h-2.37q-3.55,0-3.55,4.06V37.56h-6.37V9.86h6.32v3.55a4.94,4.94,0,0,1,1.75-2.65A5.06,5.06,0,0,1,112.52,9.75Z" data-astro-cid-tvrurpns></animate> </path> <path id="e-andrew" fill="currentColor" d="M52.15 19h1.86q1.89 0 1.89 3.74v6.76h-3.73v3.82a2.24 2.24 0 00.1.81.39.39 0 00.39.21h.81a.39.39 0 00.39-.21 2.07 2.07 0 00.11-.81v-1.4h1.93v1.89q0 3.74-1.91 3.74h-1.82q-1.91 0-1.91-3.74V22.75Q50.24 19 52.15 19Zm0 7.75h1.82V23.2a2.07 2.07 0 00-.11-.81.39.39 0 00-.39-.21h-.84a.39.39 0 00-.39.21 2.07 2.07 0 00-.11.81Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M52.15 19h1.86q1.89 0 1.89 3.74v6.76h-3.73v3.82a2.24 2.24 0 00.1.81.39.39 0 00.39.21h.81a.39.39 0 00.39-.21 2.07 2.07 0 00.11-.81v-1.4h1.93v1.89q0 3.74-1.91 3.74h-1.82q-1.91 0-1.91-3.74V22.75Q50.24 19 52.15 19Zm0 7.75h1.82V23.2a2.07 2.07 0 00-.11-.81.39.39 0 00-.39-.21h-.84a.39.39 0 00-.39.21 2.07 2.07 0 00-.11.81Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M122.11,9.86h6q6.09,0,6.09,5.58v10.1h-12v5.7a1.74,1.74,0,0,0,.31,1.21,1.85,1.85,0,0,0,1.27.31h2.59a1.86,1.86,0,0,0,1.24-.31,1.64,1.64,0,0,0,.34-1.21V29.15h6.2V32q0,5.58-6.15,5.58h-5.87Q116,37.56,116,32V15.45Q116,9.86,122.11,9.86Zm.06,11.56H128v-5.3a1.64,1.64,0,0,0-.34-1.21,1.87,1.87,0,0,0-1.24-.31h-2.71a1.87,1.87,0,0,0-1.24.31,1.64,1.64,0,0,0-.34,1.21Z" data-astro-cid-tvrurpns></animate> </path> <path id="w-andrew" fill="currentColor" d="M58.4 19h1.86l-1.68 18.55H56.24l-1-13.11-1 13.11h-2.33L50.22 19h1.86l1 14.47L54.2 19h2.08l1.05 14.43Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M58.4 19h1.86l-1.68 18.55H56.24l-1-13.11-1 13.11h-2.33L50.22 19h1.86l1 14.47L54.2 19h2.08l1.05 14.43Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M162.55,9.86h6l-5.42,27.7h-7.5L152.29,18,149,37.56h-7.5l-5.25-27.7h6l3.21,21.6L149,9.86h6.71l3.38,21.55Z" data-astro-cid-tvrurpns></animate> </path> <path id="l-leedham" fill="currentColor" d="M65.04 106.51h4.83V108H61.74V97.36h3.31Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M65.04 106.51h4.83V108H61.74V97.36h3.31Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M27.9,85.76H47.73V96.14H14.33V23.8H27.9Z" data-astro-cid-tvrurpns></animate> </path> <path id="e-leedham" fill="currentColor" d="M64.87 99.8h3q3.11 0 3.11 1.72v3.12h-6.13v1.45a.4.4 0 00.16.37 1.43 1.43 0 00.65.1h1.32a1.44 1.44 0 00.63-.1.39.39 0 00.17-.37v-.64h3.17v.87q0 1.72-3.14 1.72h-3q-3.14 0-3.14-1.72v-4.79Q61.74 99.8 64.87 99.8Zm0 3.57h3v-1.64a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1H65.74a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M64.87 99.8h3q3.11 0 3.11 1.72v3.12h-6.13v1.45a.4.4 0 00.16.37 1.43 1.43 0 00.65.1h1.32a1.44 1.44 0 00.63-.1.39.39 0 00.17-.37v-.64h3.17v.87q0 1.72-3.14 1.72h-3q-3.14 0-3.14-1.72v-4.79Q61.74 99.8 64.87 99.8Zm0 3.57h3v-1.64a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1H65.74a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M65.43,40.32H77.94q12.75,0,12.75,11.68V73.13H65.55v9.79a3.64,3.64,0,0,0,.65,2.54,3.87,3.87,0,0,0,2.66.65h5.43a3.9,3.9,0,0,0,2.6-.65,3.43,3.43,0,0,0,.71-2.54V78.56h13v5.9q0,11.68-12.86,11.68H65.43q-12.86,0-12.86-11.68V52Q52.57,40.32,65.43,40.32Zm.12,24.19H77.82V53.42a3.43,3.43,0,0,0-.71-2.54,3.91,3.91,0,0,0-2.6-.65H68.85a3.9,3.9,0,0,0-2.6.65,3.43,3.43,0,0,0-.71,2.54Z" data-astro-cid-tvrurpns></animate> </path> <path id="e2-leedham" fill="currentColor" d="M64.87 99.8h3q3.11 0 3.11 1.72v3.12h-6.13v1.45a.4.4 0 00.16.37 1.43 1.43 0 00.65.1h1.32a1.44 1.44 0 00.63-.1.39.39 0 00.17-.37v-.64h3.17v.87q0 1.72-3.14 1.72h-3q-3.14 0-3.14-1.72v-4.79Q61.74 99.8 64.87 99.8Zm0 3.57h3v-1.64a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1H65.74a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M64.87 99.8h3q3.11 0 3.11 1.72v3.12h-6.13v1.45a.4.4 0 00.16.37 1.43 1.43 0 00.65.1h1.32a1.44 1.44 0 00.63-.1.39.39 0 00.17-.37v-.64h3.17v.87q0 1.72-3.14 1.72h-3q-3.14 0-3.14-1.72v-4.79Q61.74 99.8 64.87 99.8Zm0 3.57h3v-1.64a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1H65.74a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M111.69,40.32H124.2q12.75,0,12.75,11.68V73.13H111.81v9.79a3.64,3.64,0,0,0,.65,2.54,3.87,3.87,0,0,0,2.66.65h5.43a3.9,3.9,0,0,0,2.6-.65,3.43,3.43,0,0,0,.71-2.54V78.56h13v5.9q0,11.68-12.86,11.68H111.69q-12.86,0-12.86-11.68V52Q98.83,40.32,111.69,40.32Zm.12,24.19h12.27V53.42a3.43,3.43,0,0,0-.71-2.54,3.91,3.91,0,0,0-2.6-.65h-5.67a3.9,3.9,0,0,0-2.6.65,3.43,3.43,0,0,0-.71,2.54Z" data-astro-cid-tvrurpns></animate> </path> <path id="d-leedham" fill="currentColor" d="M67.65 97.36h3.28V108H67.74v-.85q-.35.85-2 .85H64.74q-2.93 0-2.93-1.72v-4.81q0-1.72 2.93-1.72h.89q1.55 0 2 .73Zm-1.76 9.15H66.74q.89 0 .89-.57v-4a.51.51 0 00-.2-.46 1.34 1.34 0 00-.69-.13h-.86a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37V106a.39.39 0 00.17.37A1.44 1.44 0 0065.89 106.51Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M67.65 97.36h3.28V108H67.74v-.85q-.35.85-2 .85H64.74q-2.93 0-2.93-1.72v-4.81q0-1.72 2.93-1.72h.89q1.55 0 2 .73Zm-1.76 9.15H66.74q.89 0 .89-.57v-4a.51.51 0 00-.2-.46 1.34 1.34 0 00-.69-.13h-.86a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37V106a.39.39 0 00.17.37A1.44 1.44 0 0065.89 106.51Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M168.7,23.8h13.45V96.14H168.93V90.36q-1.42,5.78-8.38,5.78h-3.66q-12,0-12-11.68V51.89q0-11.68,12-11.68h3.66q6.37,0,8.14,5Zm-7.2,62H165q3.66,0,3.66-3.89V54.6a4.6,4.6,0,0,0-.83-3.13,3.76,3.76,0,0,0-2.83-.89H161.5a3.9,3.9,0,0,0-2.6.65,3.43,3.43,0,0,0-.71,2.54v28.8a3.43,3.43,0,0,0,.71,2.54A3.9,3.9,0,0,0,161.5,85.76Z" data-astro-cid-tvrurpns></animate> </path> <path id="h-leedham" fill="currentColor" d="M67.1 99.8h.86q3 0 3 1.72V108h-3.28V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108H61.84V97.36h3.25v3.17Q65.52 99.8 67.1 99.8Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M67.1 99.8h.86q3 0 3 1.72V108h-3.28V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108H61.84V97.36h3.25v3.17Q65.52 99.8 67.1 99.8Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M213.78,40.32h3.54q12.15,0,12.16,11.68V96.14H216V53.89a3.43,3.43,0,0,0-.71-2.54,3.91,3.91,0,0,0-2.6-.65h-3.54q-3.66,0-3.66,3.9V96.14H192.18V23.8h13.34V45.28Q207.29,40.32,213.78,40.32Z" data-astro-cid-tvrurpns></animate> </path> <path id="a-leedham" fill="currentColor" d="M67.74 99.8h3.22V108h-3.28v-.73q-.43.73-2 .73H64.74q-2.93 0-2.93-1.72v-4.79q0-1.72 2.93-1.72h.89q1.7 0 2 .84Zm-1.81 6.71H66.74q.89 0 .89-.57v-4q0-.58-.89-.58h-.86a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37V106a.39.39 0 00.17.37A1.44 1.44 0 0065.89 106.51Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M67.74 99.8h3.22V108h-3.28v-.73q-.43.73-2 .73H64.74q-2.93 0-2.93-1.72v-4.79q0-1.72 2.93-1.72h.89q1.7 0 2 .84Zm-1.81 6.71H66.74q.89 0 .89-.57v-4q0-.58-.89-.58h-.86a1.44 1.44 0 00-.63.1.39.39 0 00-.17.37V106a.39.39 0 00.17.37A1.44 1.44 0 0065.89 106.51Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M262.52,40.32h13.22V96.14H262.28v-5q-1.77,5-8.14,5h-3.66q-12,0-12-11.68V52q0-11.68,12-11.68h3.66q7,0,8.38,5.66Zm-7.43,45.44h3.54q3.66,0,3.66-3.89V54.6q0-3.9-3.66-3.9h-3.54a3.9,3.9,0,0,0-2.6.65,3.43,3.43,0,0,0-.71,2.54V82.57a3.43,3.43,0,0,0,.71,2.54A3.9,3.9,0,0,0,255.08,85.76Z" data-astro-cid-tvrurpns></animate> </path> <path id="m-leedham" fill="currentColor" d="M72.91 99.8h.89q2.93 0 2.93 1.72V108h-3.25V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108h-3.28V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108H61.84V99.8h3.22v.78q.4-.78 2-.78h.86q2.13 0 2.7.87Q71.07 99.8 72.91 99.8Z" data-astro-cid-tvrurpns> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="M72.91 99.8h.89q2.93 0 2.93 1.72V108h-3.25V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108h-3.28V101.8a.39.39 0 00-.17-.37 1.44 1.44 0 00-.63-.1h-.86q-.89 0-.89.58V108H61.84V99.8h3.22v.78q.4-.78 2-.78h.86q2.13 0 2.7.87Q71.07 99.8 72.91 99.8Z" data-astro-cid-tvrurpns></animate> <animate attributeName="d" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="M331.2,40.32h3.66q12,0,12,11.68V96.14H333.56V53.89a3.43,3.43,0,0,0-.71-2.54,3.91,3.91,0,0,0-2.6-.65h-3.54q-3.66,0-3.66,3.9V96.14H309.61V53.89a3.43,3.43,0,0,0-.71-2.54,3.91,3.91,0,0,0-2.6-.65h-3.54q-3.66,0-3.66,3.9V96.14H285.77V40.32H299v5.31q1.65-5.31,8.38-5.31h3.54q8.73,0,11.09,5.9Q323.65,40.32,331.2,40.32Z" data-astro-cid-tvrurpns></animate> </path> <polygon id="right" fill="currentColor" points="87.75 11.94 63.13 11.94 64.72 19.52 87.75 19.52 87.75 100.46 81.81 100.46 83.38 108.04 95.78 108.04 95.78 107.96 95.78 100.46 95.78 19.52 95.78 11.94 87.75 11.94" data-astro-cid-tvrurpns> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="87.75 11.94 63.13 11.94 64.72 19.52 87.75 19.52 87.75 100.46 81.81 100.46 83.38 108.04 95.78 108.04 95.78 107.96 95.78 100.46 95.78 19.52 95.78 11.94 87.75 11.94" data-astro-cid-tvrurpns></animate> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="353.98 11.94 172.44 11.94 171.02 19.52 353.98 19.52 353.98 100.46 348.03 100.46 349.6 108.04 362 108.04 362 107.96 362 100.46 362 19.52 362 11.94 353.98 11.94" data-astro-cid-tvrurpns></animate> </polygon> <polygon id="bottom" fill="currentColor" points="55.82 100.46 57.22 108 37.72 108.04 38.97 100.46 55.82 100.46" data-astro-cid-tvrurpns> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="55.82 100.46 57.22 108 37.72 108.04 38.97 100.46 55.82 100.46" data-astro-cid-tvrurpns></animate> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="353.98 100.46 353.98 108.04 7.83 108.04 8 100.46 353.98 100.46" data-astro-cid-tvrurpns></animate> </polygon> <polygon id="left" fill="currentColor" points="29.52 19.55 31.09 11.97 8.03 11.95 8.03 11.94 0 11.94 0 19.52 0 100.38 0 107.96 8.03 107.96 11.72 107.96 13.21 100.38 8.03 100.38 8.03 19.52 29.52 19.55" data-astro-cid-tvrurpns> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseleave" to="29.52 19.55 31.09 11.97 8.03 11.95 8.03 11.94 0 11.94 0 19.52 0 100.38 0 107.96 8.03 107.96 11.72 107.96 13.21 100.38 8.03 100.38 8.03 19.52 29.52 19.55" data-astro-cid-tvrurpns></animate> <animate attributeName="points" dur="100ms" fill="freeze" repeatCount="1" begin="logoAnimated.mouseenter;" to="29.52 19.55 31.08 11.97 8.02 11.95 8.02 11.94 0 11.94 0 19.52 0 100.38 0 107.96 8.02 107.96 11.72 107.96 13.21 100.38 8.02 100.38 8.02 19.52 29.52 19.55" data-astro-cid-tvrurpns></animate> </polygon> </svg> <svg class="logo--small" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="48px" height="48px" data-astro-cid-tvrurpns><path fill="currentColor" d="m41.12 64-2.43-13.29h-14L22.45 64H10.78L23.67 0H39.4l13.49 64ZM26.21 41.88h10.85l-5.58-30.64ZM58.42-.02H42.29l1.04 5.05h15.09v53.92h-3.96L55.51 64h8.26V-.02h-5.35z" data-astro-cid-tvrurpns></path><path fill="currentColor" d="m37.41 58.95.94 5.05H25.36l.83-5.05h11.22zM19.9 5.05 20.94 0 5.58-.01v-.01H.23V63.94h7.81l.99-5.04H5.58V5.03l14.32.02z" data-astro-cid-tvrurpns></path></svg> </a>  <script type="application/javascript">
  const logoLink = document.getElementById("logoLink");
  const animations = Array.from(logoLink.getElementsByTagName("animate"));
  if (animations.length) {
    logoLink.addEventListener("focus", () => {
      const svg = logoLink.querySelector("svg");
      if (!logoLink.matches(":hover")) {
        if (svg) {
          svg.id = "";
        }
        animations.forEach(
          (animation, index) => index % 2 !== 0 && animation.beginElement()
        );
      }
    });
    logoLink.addEventListener("blur", () => {
      const svg = logoLink.querySelector("svg");
      if (!logoLink.matches(":hover")) {
        if (svg) {
          svg.id = "logoAnimated";
        }
        animations.forEach(
          (animation, index) => index % 2 === 0 && animation.beginElement()
        );
      }
    });
  }
</script> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blog" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  </div> <script>
      const currentMode = localStorage.getItem("mode");
      const colorSchemeTag = document.querySelector(
        'meta[name="color-scheme"]'
      );

      if (currentMode === "dark") {
        document.body.classList.toggle("dark-mode");
        colorSchemeTag.setAttribute("content", "dark");
      } else if (currentMode === "light") {
        document.body.classList.toggle("light-mode");
        colorSchemeTag.setAttribute("content", "light");
      }

      window.toggleMode = () => {
        const systemLevelDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        );
        const colorSchemeTag = document.querySelector(
          'meta[name="color-scheme"]'
        );
        let mode;
        if (systemLevelDark.matches) {
          document.body.classList.toggle("light-mode");
          mode = document.body.classList.contains("light-mode")
            ? "light"
            : "dark";
        } else {
          document.body.classList.toggle("dark-mode");
          mode = document.body.classList.contains("dark-mode")
            ? "dark"
            : "light";
        }
        localStorage.setItem("mode", mode);
        colorSchemeTag.setAttribute("content", mode);
      };
    </script> <button aria-label="Toggle Colour Mode" class="button button--mode-toggle" onclick="window.toggleMode()" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun light-icon" data-astro-cid-3ef6ksr2="true"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon dark-icon" data-astro-cid-3ef6ksr2="true"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg> </button> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2022-07-24T00:00:00.000Z"> Jul 24, 2022 </time>  </div> <div style="width:100%;height:240px;background-color:#41EAD4;color:#000;display:grid;place-items:center;border-radius:10px"><svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader "><line x1="12" x2="12" y1="2" y2="6"></line><line x1="12" x2="12" y1="18" y2="22"></line><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"></line><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"></line><line x1="2" x2="6" y1="12" y2="12"></line><line x1="18" x2="22" y1="12" y2="12"></line><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"></line><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"></line></svg></div> <br data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>How I optimised icon loading in Storybook and Vite</h1> <hr data-astro-cid-bvzihdzo> </div>  <h2 id="the-problem">The Problem</h2>
<p>For the purposes of this blog post the <a href="https://storybook.js.org/">Storybook</a> in question is a React based component library using <a href="https://vitejs.dev/">Vite</a> as the <a href="https://github.com/storybookjs/builder-vite">Storybook builder</a>. It is unfortunately closed source, but I will provide some working code based on it in this blog post. The icons are each their own React components along the lines of:</p>
<div style="display: none">
<pre class="astro-code dark-plus" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span></span></span></code></pre>
</div>
<pre class="astro-code dark-plus twoslash lsp" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#6A9955">// @filename: icons/LightBulb.tsx</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE">React</span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> "react"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> IconProps</span><span style="color:#D4D4D4"> = {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>IconProps</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "../IconBase"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#C586C0"> default</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> LightBulbIcon</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>LightBulbIcon</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">props</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">IconProps</span></code></span>props</span></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> IconProps</span><span style="color:#D4D4D4"> = {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>IconProps</span></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#D4D4D4"> (</span></span>
<span class="line"><span style="color:#808080">    &#x3C;</span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">      &#x3C;</span><span style="color:#569CD6"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4FC1FF">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">IntrinsicElements</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">React</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">SVGProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">SVGPathElement</span><span style="color:#D4D4D4">></span></code></span>path</span></span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">React</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">SVGAttributes</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">SVGPathElement</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">d</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>d</span></span><span style="color:#D4D4D4">=</span><span style="color:#CE9178">"..."</span><span style="color:#808080">>&#x3C;/</span><span style="color:#569CD6"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#4FC1FF">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">IntrinsicElements</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">React</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">SVGProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">SVGPathElement</span><span style="color:#D4D4D4">></span></code></span>path</span></span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#808080">    &#x3C;/</span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#808080">></span></span>
<span class="line"><span style="color:#D4D4D4">  );</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span></code></pre>
<p>All of the 200+ icons are then re-exported from a single index file like so:</p>
<pre class="astro-code dark-plus" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#6A9955">// @filename: index.tsx</span></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#D4D4D4"> { </span><span style="color:#C586C0">default</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> LightBulbIcon</span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "./icons/LightBulb"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#6A9955">// ...</span></span>
<span class="line"></span></code></pre>
<p>I am aware there are better ways of doing icons in React land, this project is a little special in that React is never run on the client, but that is beside the point. The problem here is with the way Vite works in a dev environment, it does not bundle source code, it does an HTTP request for every import and runs esbuild on each file to compile away TypeScript and JSX. This means that if we use a single icon from the index file it makes 200+ HTTP requests, which as you can imagine is a lot of overhead and very slow. So I started looking for solutions.</p>
<h2 id="initial-findings">Initial findings</h2>
<p>The first place I looked was the Vite docs, as I find them to be a great example of documentation and very easy to read. I quickly came across <a href="https://vitejs.dev/guide/dep-pre-bundling.html#dependency-pre-bundling">“Dependency Pre-Bundling”</a> which sounded like exactly what I need. It even speaks about the exact issue I am having “Some packages ship their ES modules builds as many separate files importing one another.”. So I started messing around with the <code>optimizeDeps</code> option, trying to get it to bundle my index file. This proved difficult, I could not get it to bundle the file no matter how I formatted the paths. It then occurred to me that all the docs on this subject are talking about <code>node_modules</code> or linked dependencies. So I did the next logical step and set up an alias to trick Vite into thinking it was a <code>node_module</code>, this still didn’t seem to work, I can only assume Vite is very aware of what is source code and what isn’t. So I had to come up with something else.</p>
<h2 id="a-three-pronged-approach">A three-pronged approach</h2>
<p>After getting on with some other work, I thought about how I might solve this issue in the background. I eventually settled on a three-pronged attack on icons across the board.</p>
<h3 id="one-direct-imports">One: Direct imports</h3>
<p>Components that consume icons as a one-off can simply import the raw file, not the index. This means it will only load what it needs for each of these components.</p>
<h3 id="two-lazy-loaded-modules">Two: Lazy-loaded modules</h3>
<p>For stories that have a control for the currently shown icon, we will dynamically import each of the icons, so they aren’t requested until selected. This was surprisingly simple with Vite’s <code>import.meta.glob</code> API and the <code>React.lazy</code> API. It looks something like this:</p>
<pre class="astro-code dark-plus twoslash lsp" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE">React</span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> "react"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> "./IconBase"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> icons</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Record</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#9CDCFE">    default</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>></span></code></span>icons</span></span><span style="color:#D4D4D4"> = </span><span style="color:#C586C0">import</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">meta</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">ImportMeta</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">glob</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">ImportGlobFunction</span><br><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#C586C0">    default</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>(</span><span style="color:#9CDCFE">glob</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">[], </span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">ImportGlobOptions</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">false</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#9CDCFE"> Record</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">, () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#9CDCFE">    default</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>> (+</span><span style="color:#B5CEA8">2</span><span style="color:#9CDCFE"> overloads</span><span style="color:#D4D4D4">)</span></code></span>glob</span></span><span style="color:#D4D4D4">&#x3C;{ </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C586C0">default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#9CDCFE"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4FC1FF">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">Element</span></code></span>default</span></span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#D4D4D4"> }>(</span><span style="color:#CE9178">"./icons/*.tsx"</span><span style="color:#D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#C586C0"> default</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> useIcon</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span></code></span>useIcon</span></span><span style="color:#D4D4D4">(</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>iconName</span></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span></span>
<span class="line"><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.LazyExoticComponent&#x3C;</span><span style="color:#4EC9B0">T</span><span style="color:#569CD6"> extends</span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">>> = </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ExoticComponent</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">CustomComponentPropsWithRef</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">T</span><span style="color:#D4D4D4">>> &#x26; {</span><br><span style="color:#569CD6">    readonly</span><span style="color:#9CDCFE"> _result</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">T</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>LazyExoticComponent</span></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>iconName</span></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#569CD6">    const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> iconPath</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span></code></span>iconPath</span></span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> getIconPathFromName</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">string</span></code></span>getIconPathFromName</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>iconName</span></span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#569CD6">    const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> iconModule</span><span style="color:#D4D4D4">: () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#DCDCAA">    default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>iconModule</span></span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> icons</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Record</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#DCDCAA">    default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>></span></code></span>icons</span></span><span style="color:#D4D4D4">[</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> iconPath</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span></code></span>iconPath</span></span><span style="color:#D4D4D4">];</span></span>
<span class="line"><span style="color:#C586C0">    if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> iconModule</span><span style="color:#D4D4D4">: () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#DCDCAA">    default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>iconModule</span></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">      return</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE">React</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> React</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">lazy</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">>(</span><span style="color:#DCDCAA">factory</span><span style="color:#D4D4D4">: () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#DCDCAA">    default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">></span></code></span>lazy</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> iconModule</span><span style="color:#D4D4D4">: () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#DCDCAA">    default</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>iconModule</span></span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">    }</span></span>
<span class="line"><span style="color:#D4D4D4">  }</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> iconNames</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">[]</span></code></span>iconNames</span></span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">var</span><span style="color:#9CDCFE"> Object</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">ObjectConstructor</span></code></span>Object</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">ObjectConstructor</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">keys</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">o</span><span style="color:#D4D4D4">: {}): </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">[] (+</span><span style="color:#B5CEA8">1</span><span style="color:#9CDCFE"> overload</span><span style="color:#D4D4D4">)</span></code></span>keys</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> icons</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">Record</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, () </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> Promise</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#9CDCFE">    default</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>></span></code></span>icons</span></span><span style="color:#D4D4D4">);</span></span>
<span class="line"></span></code></pre>
<p>This gives us a hook that returns a lazy component or undefined given an icon name. We can then use it in our stories file:</p>
<pre class="astro-code dark-plus twoslash lsp" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#6A9955">// @filename: Icon.stories.tsx</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE">React</span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> "react"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> IconProps</span><span style="color:#D4D4D4"> = {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>IconProps</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "./IconBase"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> useIcon</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#569CD6">typeof</span><span style="color:#9CDCFE"> IconBase</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span></code></span>useIcon</span></span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> iconNames</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">[]</span></code></span>iconNames</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "./useIcon"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#C586C0"> type</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> StoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Args</span><span style="color:#D4D4D4">> = [</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">] </span><span style="color:#569CD6">extends</span><span style="color:#D4D4D4"> [</span><span style="color:#4EC9B0">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">>] ? </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">ComponentProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">>> : </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;...></span></code></span>StoryFn</span></span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> Meta</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Args</span><span style="color:#D4D4D4">> = [</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">] </span><span style="color:#569CD6">extends</span><span style="color:#D4D4D4"> [</span><span style="color:#4EC9B0">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">>] ? </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">ComponentProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">>> : </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;...></span></code></span>Meta</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "@storybook/react"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#C586C0"> default</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">Args</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">title</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>title</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "Icon"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">Args</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">component</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">React</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">any</span><span style="color:#D4D4D4">> | </span><span style="color:#569CD6">undefined</span></code></span>component</span></span><span style="color:#9CDCFE">:</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> IconBase</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span></code></span>IconBase</span></span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">argTypes</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">Partial</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">ArgTypes</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">Args</span><span style="color:#D4D4D4">>> | </span><span style="color:#569CD6">undefined</span></code></span>argTypes</span></span><span style="color:#9CDCFE">:</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">    </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">icon</span><span style="color:#D4D4D4">: {</span><br><span style="color:#C8C8C8">    options</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">[];</span><br><span style="color:#C8C8C8">    control</span><span style="color:#D4D4D4">: {</span><br><span style="color:#C8C8C8">        type</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"select"</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    };</span><br><span style="color:#D4D4D4">}</span></code></span>icon</span></span><span style="color:#9CDCFE">:</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">      </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">InputType</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">readonly</span><span style="color:#9CDCFE"> any</span><span style="color:#D4D4D4">[] | </span><span style="color:#569CD6">undefined</span></code></span>options</span></span><span style="color:#9CDCFE">:</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> iconNames</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">[]</span></code></span>iconNames</span></span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">      </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">InputType</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">control</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">Control</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>control</span></span><span style="color:#9CDCFE">:</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">        </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">type</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"select"</span></code></span>type</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "select"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">      },</span></span>
<span class="line"><span style="color:#D4D4D4">    },</span></span>
<span class="line"><span style="color:#D4D4D4">  },</span></span>
<span class="line"><span style="color:#D4D4D4">} </span><span style="color:#C586C0">as</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> Meta</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Args</span><span style="color:#D4D4D4">> = [</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">] </span><span style="color:#569CD6">extends</span><span style="color:#D4D4D4"> [</span><span style="color:#4EC9B0">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">>] ? </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">ComponentProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">>> : </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">ComponentAnnotations</span><span style="color:#D4D4D4">&#x3C;...></span></code></span>Meta</span></span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Template</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>Template</span></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> StoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Args</span><span style="color:#D4D4D4">> = [</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">] </span><span style="color:#569CD6">extends</span><span style="color:#D4D4D4"> [</span><span style="color:#4EC9B0">ComponentType</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">>] ? </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">ComponentProps</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">TCmpOrArgs</span><span style="color:#D4D4D4">>> : </span><span style="color:#4EC9B0">_storybook_types</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;...></span></code></span>StoryFn</span></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> IconProps</span><span style="color:#D4D4D4"> = {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>IconProps</span></span><span style="color:#D4D4D4"> &#x26; { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>icon</span></span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> }> = (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>args</span></span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#D4D4D4"> { </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> icon</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span></code></span>icon</span></span><span style="color:#D4D4D4">, ...</span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> props</span><span style="color:#D4D4D4">: {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>props</span></span><span style="color:#D4D4D4"> } = </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>args</span></span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Icon</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span></code></span>Icon</span></span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> useIcon</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">iconName</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span></code></span>useIcon</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> icon</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span></code></span>icon</span></span><span style="color:#D4D4D4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Icon</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">undefined</span></code></span>Icon</span></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">    return</span><span style="color:#808080"> &#x3C;>&#x3C;/></span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#808080"> &#x3C;</span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Icon</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">LazyExoticComponent</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#9CDCFE">props</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#4EC9B0"> React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">JSX</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Element</span><span style="color:#D4D4D4">></span></code></span>Icon</span></span><span style="color:#569CD6"> {</span><span style="color:#D4D4D4">...</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> props</span><span style="color:#D4D4D4">: {</span><br><span style="color:#9CDCFE">    string</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    suppressHydrationWarning</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    className</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    color</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    height</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    ... </span><span style="color:#B5CEA8">472</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ...;</span><br><span style="color:#9CDCFE">    key</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">React</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Key</span><span style="color:#D4D4D4"> | ... </span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> more</span><span style="color:#D4D4D4"> ... | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}</span></code></span>props</span></span><span style="color:#569CD6">}</span><span style="color:#808080"> /></span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#569CD6"> const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Default</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>Default</span></span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Template</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>Template</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">CallableFunction</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">bind</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}>>(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#D4D4D4">    ...;</span><br><span style="color:#D4D4D4">}>, </span><span style="color:#9CDCFE">thisArg</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">unknown</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;...> (+</span><span style="color:#B5CEA8">1</span><span style="color:#4EC9B0"> overload</span><span style="color:#D4D4D4">)</span></code></span>bind</span></span><span style="color:#D4D4D4">({});</span></span>
<span class="line"><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> Default</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">AnnotatedStoryFn</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">ReactRenderer</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}></span></code></span>Default</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">args</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">Partial</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">IconProps</span><span style="color:#D4D4D4"> &#x26; {</span><br><span style="color:#9CDCFE">    icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}> | </span><span style="color:#569CD6">undefined</span></code></span>args</span></span><span style="color:#D4D4D4"> = {</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">icon</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>icon</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "LightBulbIcon"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">};</span></span>
<span class="line"></span></code></pre>
<p>Now when a user selects an icon name from the icon control in the Storybook interface, React will dynamically import the appropriate icon module and render it when it is available. Meaning only the default selected icon is loaded at runtime.</p>
<h3 id="three-all-icon-reference">Three: All Icon Reference</h3>
<p>For stories or documentation that show all the icons next to each other for reference, we still have the original issue. Since my previous attempts failed, I decided to go down a level of abstraction and write a plugin (at this point I just wanted things to work). Thankfully, Vite uses a plugin architecture borrowed from Rollup, which I have had a fair amount of experience writing in the past. Furthermore, we know it uses esbuild to transpile source code on the fly, so why not just do that for our index file. Below is roughly what the plugin looks like:</p>
<pre class="astro-code dark-plus twoslash lsp" style="background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">interface</span><span style="color:#4EC9B0"> Plugin</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">A</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">></span></code></span>Plugin</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "vite"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> build</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">T</span><span style="color:#569CD6"> extends</span><span style="color:#4EC9B0"> BuildOptions</span><span style="color:#D4D4D4">>(</span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">SameShape</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">BuildOptions</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">T</span><span style="color:#D4D4D4">>): </span><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">BuildResult</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">T</span><span style="color:#D4D4D4">>></span></code></span>build</span></span><span style="color:#D4D4D4"> } </span><span style="color:#C586C0">from</span><span style="color:#CE9178"> "esbuild"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">import</span><span style="color:#569CD6"> *</span><span style="color:#C586C0"> as</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> path</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PlatformPath</span></code></span>path</span></span><span style="color:#C586C0"> from</span><span style="color:#CE9178"> "path"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">export</span><span style="color:#C586C0"> default</span><span style="color:#569CD6"> function</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> bundleIconsPlugin</span><span style="color:#D4D4D4">(): </span><span style="color:#4EC9B0">Plugin</span></code></span>bundleIconsPlugin</span></span><span style="color:#D4D4D4">(): </span><span style="color:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">interface</span><span style="color:#4EC9B0"> Plugin</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">A</span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0">any</span><span style="color:#D4D4D4">></span></code></span>Plugin</span></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">  let</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> command</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span></code></span>command</span></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">    </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OutputPlugin</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">name</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>name</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "bundle-icons"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#DCDCAA">    </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">Plugin</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">any</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">config</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">ObjectHook</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">void</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">config</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">UserConfig</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">env</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">ConfigEnv</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#569CD6"> void</span><span style="color:#D4D4D4"> | </span><span style="color:#9CDCFE">Omit</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">UserConfig</span><span style="color:#D4D4D4">, </span><span style="color:#CE9178">"plugins"</span><span style="color:#D4D4D4">> | </span><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#569CD6">void</span><span style="color:#D4D4D4"> | </span><span style="color:#9CDCFE">Omit</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">UserConfig</span><span style="color:#D4D4D4">, </span><span style="color:#CE9178">"plugins"</span><span style="color:#D4D4D4">> | </span><span style="color:#569CD6">null</span><span style="color:#D4D4D4">> | </span><span style="color:#569CD6">null</span><span style="color:#D4D4D4">> | </span><span style="color:#569CD6">undefined</span></code></span>config</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">config</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">UserConfig</span></code></span>config</span></span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">ConfigEnv</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">command</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"build"</span><span style="color:#D4D4D4"> | </span><span style="color:#CE9178">"serve"</span></code></span>command</span></span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">_command</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"build"</span><span style="color:#D4D4D4"> | </span><span style="color:#CE9178">"serve"</span></code></span>_command</span></span><span style="color:#D4D4D4"> }) {</span></span>
<span class="line"><span style="color:#9CDCFE">      </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> command</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span></code></span>command</span></span><span style="color:#D4D4D4"> = </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">_command</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"build"</span><span style="color:#D4D4D4"> | </span><span style="color:#CE9178">"serve"</span></code></span>_command</span></span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">    },</span></span>
<span class="line"><span style="color:#569CD6">    async</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">Plugin</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">any</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">load</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">ObjectHook</span><span style="color:#D4D4D4">&#x3C;(</span><span style="color:#569CD6">this</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PluginContext</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">id</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">?: {</span><br><span style="color:#9CDCFE">    ssr</span><span style="color:#D4D4D4">?: </span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">} | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#9CDCFE"> LoadResult</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">LoadResult</span><span style="color:#D4D4D4">>> | </span><span style="color:#569CD6">undefined</span></code></span>load</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">id</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>id</span></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#6A9955">      // Check we are serving, as this is a development mode optimisation.</span></span>
<span class="line"><span style="color:#6A9955">      // Also check we are loading the index file.</span></span>
<span class="line"><span style="color:#C586C0">      if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">let</span><span style="color:#9CDCFE"> command</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span></code></span>command</span></span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">"serve"</span><span style="color:#D4D4D4"> &#x26;&#x26; </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">id</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>id</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">String</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">endsWith</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">searchString</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">endPosition</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">number</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#9CDCFE">boolean</span></code></span>endsWith</span></span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">"/Icon/index.tsx"</span><span style="color:#D4D4D4">)) {</span></span>
<span class="line"><span style="color:#569CD6">        const</span><span style="color:#D4D4D4"> { </span><span style="color:#4FC1FF"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> outputFiles</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">OutputFile</span><span style="color:#D4D4D4">[]</span></code></span>outputFiles</span></span><span style="color:#D4D4D4"> } = </span><span style="color:#C586C0">await</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#DCDCAA">build</span><span style="color:#D4D4D4">&#x3C;{</span><br><span style="color:#9CDCFE">    entryPoints</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">[];</span><br><span style="color:#9CDCFE">    bundle</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">true</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    platform</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"browser"</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    write</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">false</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    jsx</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"preserve"</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    absWorkingDir</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    format</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"esm"</span><span style="color:#D4D4D4">;</span><br><span style="color:#9CDCFE">    plugins</span><span style="color:#D4D4D4">: {</span><br><span style="color:#9CDCFE">        name</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">;</span><br><span style="color:#DCDCAA">        setup</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">build</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PluginBuild</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">void</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">    }[];</span><br><span style="color:#D4D4D4">}>(</span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">SameShape</span><span style="color:#D4D4D4">&#x3C;...>): </span><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">&#x3C;...></span></code></span>build</span></span><span style="color:#D4D4D4">({</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">entryPoints</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">[]</span></code></span>entryPoints</span></span><span style="color:#9CDCFE">:</span><span style="color:#D4D4D4"> [</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">id</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>id</span></span><span style="color:#D4D4D4">],</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">bundle</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">true</span></code></span>bundle</span></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> true</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">platform</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"browser"</span></code></span>platform</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "browser"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">write</span><span style="color:#D4D4D4">: </span><span style="color:#569CD6">false</span></code></span>write</span></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> false</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">jsx</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"preserve"</span></code></span>jsx</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "preserve"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">absWorkingDir</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>absWorkingDir</span></span><span style="color:#9CDCFE">:</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">var</span><span style="color:#9CDCFE"> process</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">NodeJS</span><span style="color:#D4D4D4">.</span><span style="color:#4EC9B0">Process</span></code></span>process</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">NodeJS</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">Process</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">cwd</span><span style="color:#D4D4D4">(): </span><span style="color:#9CDCFE">string</span></code></span>cwd</span></span><span style="color:#D4D4D4">(),</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">format</span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"esm"</span></code></span>format</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "esm"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#6A9955">          // We also need a custom esbuild plugin because we want to treat everything as</span></span>
<span class="line"><span style="color:#6A9955">          // external apart from our individual icon files.</span></span>
<span class="line"><span style="color:#9CDCFE">          </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">plugins</span><span style="color:#D4D4D4">: {</span><br><span style="color:#C8C8C8">    name</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">;</span><br><span style="color:#DCDCAA">    setup</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">build</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">PluginBuild</span><span style="color:#D4D4D4">): </span><span style="color:#569CD6">void</span><span style="color:#D4D4D4">;</span><br><span style="color:#D4D4D4">}[]</span></code></span>plugins</span></span><span style="color:#9CDCFE">:</span><span style="color:#D4D4D4"> [</span></span>
<span class="line"><span style="color:#D4D4D4">            {</span></span>
<span class="line"><span style="color:#9CDCFE">              </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">name</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>name</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "externals"</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#DCDCAA">              </span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> setup</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">build</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PluginBuild</span><span style="color:#D4D4D4">): </span><span style="color:#4EC9B0">void</span></code></span>setup</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">build</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">PluginBuild</span></code></span>build</span></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#9CDCFE">                </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">build</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">PluginBuild</span></code></span>build</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">PluginBuild</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">onResolve</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">options</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveOptions</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">callback</span><span style="color:#D4D4D4">: (</span><span style="color:#9CDCFE">args</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">OnResolveArgs</span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#9CDCFE"> OnResolveResult</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">Promise</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#9CDCFE">OnResolveResult</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">null</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">> | </span><span style="color:#569CD6">null</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#569CD6">void</span></code></span>onResolve</span></span><span style="color:#D4D4D4">({ </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveOptions</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">namespace</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>namespace</span></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "file"</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveOptions</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">filter</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">RegExp</span></code></span>filter</span></span><span style="color:#9CDCFE">:</span><span style="color:#D16969"> /.</span><span style="color:#D7BA7D">*</span><span style="color:#D16969">/</span><span style="color:#D4D4D4"> }, (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveArgs</span></code></span>args</span></span><span style="color:#D4D4D4">) </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#C586C0">                  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveArgs</span></code></span>args</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveArgs</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">kind</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">ImportKind</span></code></span>kind</span></span><span style="color:#D4D4D4"> === </span><span style="color:#CE9178">"entry-point"</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">                    return</span><span style="color:#569CD6"> null</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">                  }</span></span>
<span class="line"><span style="color:#6A9955">                  // If the file is in our icons folder use standard resolution.</span></span>
<span class="line"><span style="color:#C586C0">                  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveArgs</span></code></span>args</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveArgs</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>path</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">String</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">startsWith</span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE">searchString</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE">position</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">number</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span><span style="color:#D4D4D4">): </span><span style="color:#9CDCFE">boolean</span></code></span>startsWith</span></span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">"./icons/"</span><span style="color:#D4D4D4">)) {</span></span>
<span class="line"><span style="color:#C586C0">                    return</span><span style="color:#569CD6"> null</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">                  } </span><span style="color:#C586C0">else</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#6A9955">                    // Otherwise flag is external.</span></span>
<span class="line"><span style="color:#C586C0">                    return</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#9CDCFE">                      </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveResult</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>path</span></span><span style="color:#9CDCFE">:</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> path</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">PlatformPath</span></code></span>path</span></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">PlatformPath</span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA">join</span><span style="color:#D4D4D4">(...</span><span style="color:#9CDCFE">paths</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span><span style="color:#D4D4D4">[]): </span><span style="color:#9CDCFE">string</span></code></span>join</span></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveArgs</span></code></span>args</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveArgs</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">resolveDir</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>resolveDir</span></span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#C8C8C8">args</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">OnResolveArgs</span></code></span>args</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveArgs</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">path</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>path</span></span><span style="color:#D4D4D4">),</span></span>
<span class="line"><span style="color:#9CDCFE">                      </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OnResolveResult</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">external</span><span style="color:#D4D4D4">?: </span><span style="color:#9CDCFE">boolean</span><span style="color:#D4D4D4"> | </span><span style="color:#569CD6">undefined</span></code></span>external</span></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> true</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">                    };</span></span>
<span class="line"><span style="color:#D4D4D4">                  }</span></span>
<span class="line"><span style="color:#D4D4D4">                });</span></span>
<span class="line"><span style="color:#D4D4D4">              },</span></span>
<span class="line"><span style="color:#D4D4D4">            },</span></span>
<span class="line"><span style="color:#D4D4D4">          ],</span></span>
<span class="line"><span style="color:#D4D4D4">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">        // Make sure we build something.</span></span>
<span class="line"><span style="color:#C586C0">        if</span><span style="color:#D4D4D4"> (!</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> outputFiles</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">OutputFile</span><span style="color:#D4D4D4">[]</span></code></span>outputFiles</span></span><span style="color:#D4D4D4"> || </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> outputFiles</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">OutputFile</span><span style="color:#D4D4D4">[]</span></code></span>outputFiles</span></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">Array</span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4FC1FF">T</span><span style="color:#D4D4D4">>.</span><span style="color:#9CDCFE">length</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">number</span></code></span>length</span></span><span style="color:#D4D4D4"> !== </span><span style="color:#B5CEA8">1</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">          return</span><span style="color:#569CD6"> null</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955">        // Return the bundled file contents.</span></span>
<span class="line"><span style="color:#C586C0">        return</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> outputFiles</span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">OutputFile</span><span style="color:#D4D4D4">[]</span></code></span>outputFiles</span></span><span style="color:#D4D4D4">[</span><span style="color:#B5CEA8">0</span><span style="color:#D4D4D4">].</span><span style="color:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#9CDCFE">OutputFile</span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE">text</span><span style="color:#D4D4D4">: </span><span style="color:#9CDCFE">string</span></code></span>text</span></span><span style="color:#C586C0"> as</span><span style="color:#4EC9B0"> string</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">      }</span></span>
<span class="line"><span style="color:#C586C0">      return</span><span style="color:#569CD6"> null</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">    },</span></span>
<span class="line"><span style="color:#D4D4D4">  };</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>And that is it. Three approaches that work in tandem to make Storybook DX so much nicer with large icon sets! I hope this blog post inspired you or solved a problem you were having, either way, thanks for reading.</p>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2024 Andrew Leedham. All rights reserved.
<ul class="social-links" data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a aria-label="Andrew Leedham's X" href="https://twitter.com/AndrewJLeedham" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" data-astro-cid-sz7xmlte="true"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"></path></svg> </a> </li> <li data-astro-cid-sz7xmlte> <a aria-label="Andrew Leedham's LinkedIn" href="https://www.linkedin.com/in/andrew-leedham-ba864b112/" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" data-astro-cid-sz7xmlte="true"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg> </a> </li> <li data-astro-cid-sz7xmlte> <a aria-label="Andrew Leedham's GitHub" href="https://github.com/AndrewLeedham" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" data-astro-cid-sz7xmlte="true"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg> </a> </li> <li data-astro-cid-sz7xmlte> <a aria-label="stack-Andrew Leedham's Stack Overflow" href="http://stackoverflow.com/users/2386508/andrew-leedham" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" data-astro-cid-sz7xmlte="true"><title>Stack Overflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg> </a> </li> </ul> </footer>  </body></html>