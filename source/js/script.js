(function(){'use scrict';var body = document.querySelector('body');function add(e){for(var o=1,t=arguments.length;o<t;o++)e.classList.add(arguments[o])}function remove(e){for(var o=1,t=arguments.length;o<t;o++)e.classList.remove(arguments[o])}function modalControl(e){var o=document.querySelector(".modal.active");o||(o=document.querySelector("input[type='radio']:checked + .modal"));var t=Array.prototype.indexOf.call(modals,o),r=(t+(e?1:-1))%modalsLength;r<0&&(r=modalsLength+r);var l=modals[r];o.style.top=-modalContainer.scrollTop+"px",l.style.removeProperty("top"),remove(o,"left","right","active"),add(o,"prev",e?"left":"right"),remove(l,"left","right","prev"),add(l,"active",e?"right":"left"),modalContainer.scrollTop=0}function modalOpen(){body.style.width=body.offsetWidth.toString()+"px",body.style.overflow="hidden"}function modalClose(){body.style.removeProperty("width"),body.style.removeProperty("overflow");for(var e=0;e<modalsLength;e++)remove(modals[e],"left","right","prev","active"),modals[e].style.removeProperty("top")}var modals=document.querySelectorAll(".modal"),modalsLength=modals.length,modalContainer=document.querySelector(".modal-container"),leftControl=modalContainer.querySelector(".left-control"),rightControl=modalContainer.querySelector(".right-control"),close=modalContainer.querySelector(".close"),modalTriggers=modalContainer.querySelectorAll("input[type='radio']"),startTouchX=0,startTouchY=0,swipeThreshold=50;leftControl.addEventListener("click",function(e){modalControl(!1)}),rightControl.addEventListener("click",function(e){modalControl(!0)}),close.addEventListener("click",modalClose);for(var i=0,len=modalTriggers.length;i<len;i++)modalTriggers[i].addEventListener("change",modalOpen);modalContainer.addEventListener("touchstart",function(e){startTouchX=e.changedTouches[0].clientX,startTouchY=e.changedTouches[0].clientY}),modalContainer.addEventListener("touchend",function(e){var o=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,r=o-startTouchX,l=t-startTouchY;Math.abs(r)>Math.abs(l)&&(r>swipeThreshold?modalControl(!1):r<-swipeThreshold&&modalControl(!0))});
function loop(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n)}function getScroll(){return window.scrollY?window.scrollY:window.pageYOffset}function parallax(){var e=getScroll();headerFg.style.transform="translateX(-50%) translateY(-50%) translateY("+FOREGROUND_DISTANCE/viewport.h*e+"px)",headerBg.style.transform="translateX(-50%) translateY(-50%) translateY("+(BACKGROUND_DISTANCE/viewport.h*e-BACKGROUND_DISTANCE/2)+"px)"}function hideTitles(){for(var e=0;e<totalSections;e++)getScroll()+viewport.h<=sections[e].offsetTop?sectionTitles[e].classList.remove("in"):sectionTitles[e].classList.add("in")}function hideMenu(){userChangedMenu||(getScroll()<=viewport.h/2?menuToggle.checked=!0:menuToggle.checked=!1)}function tick(e,t){if(null===scrollAnimationStart){var n=function(o){scrollAnimationStart||(scrollAnimationStart=o);var i=o-scrollAnimationStart;i<e?(t(Math.floor(i/e*100)/100),window.requestAnimationFrame(n)):(t(1),scrollAnimationStart=null)};window.requestAnimationFrame(n)}}function scrollToElement(e,t){var n=e.offsetTop,o=getScroll(),i=n-o;Math.abs(i)>0&&tick(Math.floor(Math.abs(i)*t),function(e){window.scroll(0,o+i*e)})}var sections=document.querySelectorAll("section"),totalSections=sections.length,sectionTitles=[];loop(sections,function(e){sectionTitles.push(e.querySelector(".section__title"))});var ticking=!1,triggerScroll=window.scrollY,header=document.getElementById("parallax"),headerBg=header.querySelector(".header__image--background"),headerFg=header.querySelector(".header__image--foreground"),menuToggle=document.getElementById("toggle-menu"),menuLabel=document.querySelector(".menu-toggle"),scrollLinks=document.querySelectorAll("a[href*='#']"),scrollAnimationStart=null,userChangedMenu=!1,fY=0,viewport={w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0)},FOREGROUND_DISTANCE=100,BACKGROUND_DISTANCE=-150;parallax(),hideTitles(),hideMenu(),window.addEventListener("scroll",function(){ticking||window.requestAnimationFrame(function(){hideTitles(),parallax(),hideMenu(),ticking=!1}),ticking=!0}),window.addEventListener("resize",function(){viewport.w=Math.max(document.documentElement.clientWidth,window.innerWidth||0),viewport.h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),hideTitles(),parallax(),hideMenu()}),menuLabel.addEventListener("click",function(){userChangedMenu=!0}),loop(scrollLinks,function(e,t){e.addEventListener("click",function(e){userChangedMenu=!0,e.preventDefault(),scrollToElement(document.querySelector(this.getAttribute("href")),.1)})});})();