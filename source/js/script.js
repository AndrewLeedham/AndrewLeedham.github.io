(function(){'use scrict';var body = document.querySelector('body');function add(e){for(var o=1,t=arguments.length;o<t;o++)e.classList.add(arguments[o])}function remove(e){for(var o=1,t=arguments.length;o<t;o++)e.classList.remove(arguments[o])}function modalControl(e){var o=document.querySelector(".modal.active");o||(o=document.querySelector("input[type='radio']:checked + .modal"));var t=Array.prototype.indexOf.call(modals,o),r=(t+(e?1:-1))%modalsLength;r<0&&(r=modalsLength+r);var l=modals[r];o.style.top=-modalContainer.scrollTop+"px",l.style.removeProperty("top"),remove(o,"left","right","active"),add(o,"prev",e?"left":"right"),remove(l,"left","right","prev"),add(l,"active",e?"right":"left"),modalContainer.scrollTop=0}function modalOpen(){body.style.width=body.offsetWidth.toString()+"px",body.style.overflow="hidden"}function modalClose(){body.style.removeProperty("width"),body.style.removeProperty("overflow");for(var e=0;e<modalsLength;e++)remove(modals[e],"left","right","prev","active"),modals[e].style.removeProperty("top")}var modals=document.querySelectorAll(".modal"),modalsLength=modals.length,modalContainer=document.querySelector(".modal-container"),leftControl=modalContainer.querySelector(".left-control"),rightControl=modalContainer.querySelector(".right-control"),close=modalContainer.querySelector(".close"),modalTriggers=modalContainer.querySelectorAll("input[type='radio']"),startTouchX=0,startTouchY=0,swipeThreshold=50;leftControl.addEventListener("click",function(e){modalControl(!1)}),rightControl.addEventListener("click",function(e){modalControl(!0)}),close.addEventListener("click",modalClose);for(var i=0,len=modalTriggers.length;i<len;i++)modalTriggers[i].addEventListener("change",modalOpen);modalContainer.addEventListener("touchstart",function(e){startTouchX=e.changedTouches[0].clientX,startTouchY=e.changedTouches[0].clientY}),modalContainer.addEventListener("touchend",function(e){var o=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,r=o-startTouchX,l=t-startTouchY;Math.abs(r)>Math.abs(l)&&(r>swipeThreshold?modalControl(!1):r<-swipeThreshold&&modalControl(!0))});
function parallax(){headerFg.style.transform="translate(-50%, calc(-50% + "+FOREGROUND_DISTANCE/viewport.h*viewport.scroll+"px))",headerBg.style.transform="translate(-50%, calc(-50% + "+(BACKGROUND_DISTANCE/viewport.h*viewport.scroll-BACKGROUND_DISTANCE/2)+"px))"}function hideTitles(){for(var e=0;e<totalSections;e++)viewport.scroll+viewport.h<=sections[e].offsetTop?sectionTitles[e].classList.remove("in"):sectionTitles[e].classList.add("in")}var sections=document.querySelectorAll("section"),totalSections=sections.length,sectionTitles=[];sections.forEach(function(e){sectionTitles.push(e.querySelector(".section__title"))},this);var ticking=!1,triggerScroll=window.scrollY,header=document.getElementById("parallax"),headerBg=header.querySelector(".header__image--background"),headerFg=header.querySelector(".header__image--foreground"),fY=0,viewport={w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0),scroll:0},FOREGROUND_DISTANCE=100,BACKGROUND_DISTANCE=-150;parallax(),hideTitles(triggerScroll),window.addEventListener("scroll",function(){viewport.scroll=window.scrollY,ticking||window.requestAnimationFrame(function(){hideTitles(),parallax(),ticking=!1}),ticking=!0});})();